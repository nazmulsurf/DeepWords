<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DeepWords - Vocabulary Excellence</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" type="image/x-icon" href="fav.png">
    <style>
        :root {
            --primary: #000000;
            --primary-light: #333333;
            --secondary: #666666;
            --light-bg: #ffffff;
            --light-card: #f8f8f8;
            --text: #000000;
            --text-secondary: #444444;
            --success: #4CAF50;
            --error: #cc0000;
            --border: #dddddd;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            --mw-color: #2c5aa0;
            --fd-color: #6a0dad;
            --gre-color: #d35400;
            --ielts-color: #1a73e8;
            --synonym-color: #4CAF50;
            --antonym-color: #ff5252;
            --related-color: #ffc107;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--light-bg);
            color: var(--text);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px 0;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .logo-container {
            display: flex;
            align-items: center;
            cursor: pointer;
            margin-right: 20px;
        }

        .logo-img {
            width: 40px;
            height: 40px;
            border-radius: 6px;
            margin-right: 10px;
            object-fit: contain;
        }

        .logo-text {
            font-size: 2rem;
            font-weight: 800;
            color: var(--primary);
            letter-spacing: 0.5px;
            white-space: nowrap;
        }

        .header-search {
            display: flex;
            align-items: center;
            flex: 1;
            max-width: 600px;
            position: relative;
            flex-wrap: nowrap;
        }

        .search-input-wrapper {
            position: relative;
            flex: 1;
            min-width: 150px;
        }

        .search-input {
            width: 100%;
            padding: 16px 20px;
            font-size: 1.1rem;
            border: 1px solid var(--border);
            border-radius: 30px;
            background: var(--light-bg);
            color: var(--text);
            outline: none;
            transition: all 0.3s ease;
            padding-right: 45px;
        }

        .search-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(0, 0, 0, 0.1);
        }

        .search-btn, .random-btn, .history-btn {
            width: 50px;
            height: 50px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 10px;
            box-shadow: var(--shadow);
            flex-shrink: 0;
        }

        .search-btn:hover, .random-btn:hover, .history-btn:hover {
            background: var(--primary-light);
        }

        .random-btn {
            background: var(--secondary);
        }

        .history-btn {
            background: #5a6268;
        }

        .history-btn:disabled {
            background: #cccccc;
            cursor: not-allowed;
        }

        .search-section {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-bottom: 30px;
        }

        .search-container {
            padding: 25px;
            border-radius: 16px;
        }

        .input-group {
            display: flex;
            width: 100%;
            gap: 10px;
        }

        .loading {
            display: none;
            text-align: center;
            margin: 20px 0;
            color: var(--primary);
        }

        .loading i {
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .results-container {
            background: var(--light-card);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            display: none;
            border: 1px solid var(--border);
        }

        .word-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border);
        }

        .word-title-container {
            display: flex;
            flex-direction: column;
        }

        .word-title {
            font-size: 2.2rem;
            color: var(--primary);
            margin-right: 15px;
        }

        .word-type {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-left: 8px;
            vertical-align: middle;
        }

        .ielts-type {
            background-color: var(--ielts-color);
            color: white;
        }

        .gre-type {
            background-color: var(--gre-color);
            color: white;
        }

        .phonetic {
            color: var(--text-secondary);
            font-size: 1.1rem;
            margin-top: 5px;
        }

        .bangla-translation {
            color: var(--text-secondary);
            font-size: 1.1rem;
            margin-top: 5px;
            font-style: italic;
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .audio-btn {
            background: var(--light-bg);
            width: 45px;
            height: 45px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid var(--border);
        }

        .audio-btn:hover {
            background: var(--primary);
            color: white;
        }

        .save-btn-header {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 20px;
            font-size: 0.9rem;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            white-space: nowrap;
        }

        .save-btn-header:hover {
            background: var(--primary-light);
        }

        .save-btn-header.saved {
            background: var(--success);
        }

        .tab-container {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--border);
            overflow-x: auto;
        }

        .tab {
            padding: 10px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
            white-space: nowrap;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .tab.active {
            border-bottom: 3px solid var(--primary);
            color: var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .meaning-section {
            margin-bottom: 25px;
        }

        .section-title {
            font-size: 1.3rem;
            color: var(--primary);
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--primary);
            display: inline-block;
        }

        .definitions-list, .synonyms-list, .antonyms-list, .examples-list, .saved-words-list, .related-words-list {
            list-style-type: none;
        }

        .definition-item, .synonym-item, .antonym-item, .example-item, .saved-word-item, .related-word-item {
            background: var(--light-bg);
            margin-bottom: 12px;
            padding: 16px;
            border-radius: 8px;
            transition: all 0.3s ease;
            border-left: 4px solid var(--primary);
        }

        .definition-item:hover, .example-item:hover, .saved-word-item:hover {
            box-shadow: var(--shadow);
        }

        .synonym-item {
            border-left-color: var(--synonym-color);
            cursor: pointer;
        }

        .synonym-item:hover {
            background-color: rgba(76, 175, 80, 0.1);
            box-shadow: var(--shadow);
        }

        .antonym-item {
            border-left-color: var(--antonym-color);
            cursor: pointer;
        }

        .antonym-item:hover {
            background-color: rgba(255, 82, 82, 0.1);
            box-shadow: var(--shadow);
        }

        .related-word-item {
            border-left-color: var(--related-color);
            cursor: pointer;
        }

        .related-word-item:hover {
            background-color: rgba(255, 193, 7, 0.1);
            box-shadow: var(--shadow);
        }

        .definition-text {
            font-weight: 700;
            color: var(--primary);
            font-size: 1.1rem;
            margin-bottom: 8px;
        }

        .example {
            color: var(--text-secondary);
            font-style: italic;
            margin-top: 8px;
            padding-left: 15px;
            border-left: 3px solid var(--primary);
        }

        .part-of-speech {
            color: var(--primary);
            font-size: 1.2rem;
            margin: 18px 0 10px;
            font-weight: 600;
        }

        .error-message {
            background: #ffebee;
            color: var(--error);
            padding: 16px;
            border-radius: 8px;
            text-align: center;
            margin: 20px 0;
            display: none;
            border-left: 4px solid var(--error);
        }

        footer {
            text-align: center;
            padding: 30px 0;
            color: var(--text-secondary);
            font-size: 0.9rem;
            border-top: 1px solid var(--border);
        }

        .saved-words-container {
            max-height: 400px;
            overflow-y: auto;
        }

        .saved-word-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }

        .saved-word-text {
            font-weight: 600;
            color: var(--primary);
        }
        
        .saved-word-bangla {
            color: var(--text-secondary);
            font-style: italic;
            margin-left: 10px;
            font-size: 0.9rem;
        }

        .remove-saved-word {
            background: none;
            border: none;
            color: var(--error);
            cursor: pointer;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }

        .remove-saved-word:hover {
            color: #ff0000;
            transform: scale(1.2);
        }

        .floating-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 50px;
            height: 50px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            z-index: 100;
            transition: all 0.3s ease;
        }

        .floating-button:hover {
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.3);
        }

        .api-source {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-top: 5px;
            font-style: italic;
        }

        .fd-highlight {
            border-left-color: var(--fd-color);
        }

        .data-source-tag {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 4px;
            font-size: 0.7rem;
            font-weight: 600;
            margin-left: 8px;
            vertical-align: middle;
        }

        .fd-tag {
            background-color: var(--fd-color);
            color: white;
        }

        .usage-section {
            background-color: #f0f7ff;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #4a90e2;
        }

        .usage-section h4 {
            color: #4a90e2;
            margin-bottom: 10px;
        }

        /* Resources section styles */
        .resources-section {
            text-align: center;
            padding: 30px;
        }

        .resources-button {
            background: var(--gre-color);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 8px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .resources-button:hover {
            background: #e67e22;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        
        .ielts-resource-button {
            background: var(--ielts-color);
        }
        
        .ielts-resource-button:hover {
            background: #0d5ccc;
        }

        /* Synonyms & Antonyms grid layout */
        .synonyms-grid, .antonyms-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-top: 15px;
        }
        
        .synonym-grid-item, .antonym-grid-item {
            background: var(--light-bg);
            padding: 10px;
            border-radius: 6px;
            text-align: center;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .synonym-grid-item {
            border: 1px solid var(--synonym-color);
            color: var(--synonym-color);
        }
        
        .antonym-grid-item {
            border: 1px solid var(--antonym-color);
            color: var(--antonym-color);
        }
        
        .synonym-grid-item:hover {
            background-color: rgba(76, 175, 80, 0.1);
        }
        
        .antonym-grid-item:hover {
            background-color: rgba(255, 82, 82, 0.1);
        }

        @media (max-width: 992px) {
            header {
                flex-direction: column;
                align-items: stretch;
            }
            
            .logo-container {
                margin-bottom: 15px;
                margin-right: 0;
            }
            
            .header-search {
                max-width: 100%;
            }
        }

        @media (max-width: 768px) {
            .logo-text {
                font-size: 1.8rem;
            }
            
            .header-search {
                flex-wrap: wrap;
            }
            
            .search-input-wrapper {
                width: 100%;
                margin-bottom: 10px;
            }
            
            .search-btn, .random-btn, .history-btn {
                margin-top: 10px;
                padding: 12px;
                border-radius: 30px;
                height: auto;
                width: auto;
                flex: 1;
            }
            
            .search-container {
                padding: 20px;
            }
            
            .word-header {
                flex-direction: column;
            }
            
            .header-right {
                margin-top: 15px;
                width: 100%;
                justify-content: space-between;
            }
            
            .tab-container {
                overflow-x: auto;
                white-space: nowrap;
            }
            
            .synonyms-grid, .antonyms-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 480px) {
            .header-search {
                flex-direction: column;
            }
            
            .search-btn, .random-btn, .history-btn {
                width: 100%;
                margin-left: 0;
                margin-top: 10px;
                border-radius: 30px;
            }
            
            .synonyms-grid, .antonyms-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo-container" id="logo">
                <img src="fav.png" alt="DeepWords Logo" class="logo-img">
                <div class="logo-text">DeepWords</div>
            </div>
            
            <div class="header-search">
                <div class="search-input-wrapper">
                    <input type="text" class="search-input" placeholder="Enter a word to explore..." id="wordInput">
                </div>
                <button class="search-btn" id="searchBtn" title="Search">
                    <i class="fas fa-search"></i>
                </button>
                <button class="random-btn" id="randomWordBtn" title="Random Word">
                    <i class="fas fa-random"></i>
                </button>
                <button class="history-btn" id="backBtn" title="Previous Word" disabled>
                    <i class="fas fa-arrow-left"></i>
                </button>
                <button class="history-btn" id="forwardBtn" title="Next Word" disabled>
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </header>

        <div class="loading" id="loading">
            <i class="fas fa-spinner"></i> Fetching word data...
        </div>
        <div class="error-message" id="errorMessage">
            <i class="fas fa-exclamation-circle"></i> <span id="errorText">Word not found. Please try another word.</span>
        </div>

        <div class="results-container" id="resultsContainer">
            <div class="word-header">
                <div class="word-title-container">
                    <h2 class="word-title" id="wordTitle">prosperity</h2>
                    <span class="word-type ielts-type" id="wordType">IELTS</span>
                    <div class="phonetic" id="phonetic">/prɒˈsper.ə.ti/</div>
                    <div class="bangla-translation" id="banglaTranslation"></div>
                </div>
                <div class="header-right">
                    <div class="audio-btn" id="audioBtn">
                        <i class="fas fa-volume-up"></i>
                    </div>
                    <button class="save-btn-header" id="saveBtnHeader">
                        <i class="fas fa-bookmark"></i> <span id="saveBtnText">Save Word</span>
                    </button>
                </div>
            </div>

            <div class="tab-container">
                <div class="tab active" data-tab="definitions">Definitions</div>
                <div class="tab" data-tab="synonyms">Synonyms & Antonyms</div>
                <div class="tab" data-tab="saved">Saved Words</div>
                <div class="tab" data-tab="resources">Resources</div>
            </div>

            <div class="tab-content active" id="definitions-tab">
                <!-- Free Dictionary Definitions -->
                <div class="meaning-section">
                    <h3 class="section-title">Definitions</h3>
                    <ul class="definitions-list" id="fdDefinitionsList">
                        <!-- FD Definitions will be inserted here -->
                    </ul>
                </div>
            </div>

            <div class="tab-content" id="synonyms-tab">
                <div class="meaning-section" id="synonymsSection">
                    <h3 class="section-title">Synonyms</h3>
                    <div class="synonyms-grid" id="synonymsGrid">
                        <!-- Synonyms grid will be inserted here -->
                    </div>
                </div>

                <div class="meaning-section" id="antonymsSection">
                    <h3 class="section-title">Antonyms</h3>
                    <div class="antonyms-grid" id="antonymsGrid">
                        <!-- Antonyms grid will be inserted here -->
                    </div>
                </div>
            </div>

            <div class="tab-content" id="saved-tab">
                <div class="meaning-section">
                    <h3 class="section-title">Saved Words</h3>
                    <div class="saved-words-container">
                        <ul class="saved-words-list" id="savedWordsList">
                            <!-- Saved words will be inserted here -->
                        </ul>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="resources-tab">
                <div class="resources-section">
                    <button class="resources-button" id="grePdfButton">
                        <i class="fas fa-download"></i> GRE Vocabulary Guide
                    </button>
                    <button class="resources-button ielts-resource-button" id="ieltsMentorButton">
                        <i class="fas fa-external-link-alt"></i> IELTS Mentor
                    </button>
                    <button class="resources-button ielts-resource-button" id="ieltsTestsButton">
                        <i class="fas fa-external-link-alt"></i> IELTS Online Tests
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="floating-button" id="scrollToTop">
        <i class="fas fa-arrow-up"></i>
    </div>

    <footer>
        <div class="container">
            <p>&nbsp;</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const searchBtn = document.getElementById('searchBtn');
            const wordInput = document.getElementById('wordInput');
            const resultsContainer = document.getElementById('resultsContainer');
            const wordTitle = document.getElementById('wordTitle');
            const wordType = document.getElementById('wordType');
            const phonetic = document.getElementById('phonetic');
            const banglaTranslation = document.getElementById('banglaTranslation');
            const fdDefinitionsList = document.getElementById('fdDefinitionsList');
            const synonymsGrid = document.getElementById('synonymsGrid');
            const antonymsGrid = document.getElementById('antonymsGrid');
            const saveBtnHeader = document.getElementById('saveBtnHeader');
            const saveBtnText = document.getElementById('saveBtnText');
            const loading = document.getElementById('loading');
            const errorMessage = document.getElementById('errorMessage');
            const errorText = document.getElementById('errorText');
            const scrollToTop = document.getElementById('scrollToTop');
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            const randomWordBtn = document.getElementById('randomWordBtn');
            const savedWordsList = document.getElementById('savedWordsList');
            const audioBtn = document.getElementById('audioBtn');
            const grePdfButton = document.getElementById('grePdfButton');
            const ieltsMentorButton = document.getElementById('ieltsMentorButton');
            const ieltsTestsButton = document.getElementById('ieltsTestsButton');
            const logo = document.getElementById('logo');
            const synonymsSection = document.getElementById('synonymsSection');
            const antonymsSection = document.getElementById('antonymsSection');
            const backBtn = document.getElementById('backBtn');
            const forwardBtn = document.getElementById('forwardBtn');

            // API endpoints and keys
            const FREE_DICTIONARY_API = "https://api.dictionaryapi.dev/api/v2/entries/en/";
            const THESAURUS_API = "https://api.api-ninjas.com/v1/thesaurus?word=";
            const THESAURUS_API_KEY = "Ed0CEOlPjDf+DryhOec6IQ==iT5SAXKFjMvGIUsD";

            // Full IELTS word list (from provided Excel file)
            const ieltsWords = [
                "Active", "Antique", "Agility", "Attire", "Awful", "Assets", "Ample", "Amateur", "Assault", "Abroad",
                "Always", "Adversity", "Allure", "Admit", "Amiable", "Annoy", "Aggressive", "Acquit", "Ambition", "Anxious",
                // ... (keeping the full list as in the original code)
            ];

            // Full GRE word list (from provided Excel file)
            const greWords = [
                "Nepotism", "Elucidate", "Trenchant", "Vacillate", "Parable", "Machismo", "Recant", "Aversion", "Ascend", "Pugnacious",
                // ... (keeping the full list as in the original code)
            ];

            // App state
            let currentWord = '';
            let savedWords = JSON.parse(localStorage.getItem('savedWords')) || [];
            let audioUrl = null;
            let searchHistory = [];
            let currentHistoryIndex = -1;
            let banglaData = {};
            let searchCache = {}; // Cache for search results
            let thesaurusCache = {}; // Cache for thesaurus results

            // Initialize the app
            updateSavedWordsList();
            loadBanglaData();
            
            // Load Bangla data from JSON file
            async function loadBanglaData() {
                try {
                    const response = await fetch('bangla.json');
                    if (response.ok) {
                        const data = await response.json();
                        // Convert the array structure to a simple key-value object
                        if (data.Words && Array.isArray(data.Words)) {
                            data.Words.forEach(item => {
                                if (item.Words && item["Bangla Meaning"]) {
                                    banglaData[item.Words.toLowerCase()] = item["Bangla Meaning"];
                                }
                            });
                        }
                    } else {
                        console.warn('Bangla translation file not found');
                    }
                } catch (error) {
                    console.warn('Error loading Bangla translations:', error);
                }
            }

            // Tab functionality
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    
                    // Remove active class from all tabs and contents
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    
                    // Add active class to clicked tab and corresponding content
                    tab.classList.add('active');
                    document.getElementById(`${tabId}-tab`).classList.add('active');
                    
                    // If saved words tab is clicked, update the list
                    if (tabId === 'saved') {
                        updateSavedWordsList();
                    }
                    
                    // If synonyms tab is clicked, try to fetch thesaurus data
                    if (tabId === 'synonyms' && currentWord && !thesaurusCache[currentWord]) {
                        fetchThesaurusData(currentWord);
                    }
                });
            });

            // Scroll to top functionality
            scrollToTop.addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });

            window.addEventListener('scroll', () => {
                if (window.pageYOffset > 300) {
                    scrollToTop.style.display = 'flex';
                } else {
                    scrollToTop.style.display = 'none';
                }
            });

            // GRE PDF button functionality
            grePdfButton.addEventListener('click', () => {
                alert('GRE Vocabulary Guide would download here');
            });

            // IELTS Mentor button functionality
            ieltsMentorButton.addEventListener('click', () => {
                window.open('https://www.ielts-mentor.com/', '_blank');
            });

            // IELTS Tests button functionality
            ieltsTestsButton.addEventListener('click', () => {
                window.open('https://ieltsonlinetests.com/', '_blank');
            });

            // Logo click to refresh page
            logo.addEventListener('click', () => {
                location.reload();
            });

            // Random word button functionality
            randomWordBtn.addEventListener('click', () => {
                fetchRandomWord();
            });

            // Back button functionality
            backBtn.addEventListener('click', () => {
                if (currentHistoryIndex > 0) {
                    currentHistoryIndex--;
                    const prevWord = searchHistory[currentHistoryIndex];
                    wordInput.value = prevWord;
                    currentWord = prevWord;
                    
                    // Check if we have cached data for this word
                    if (searchCache[prevWord]) {
                        displayWordData(searchCache[prevWord]);
                    } else {
                        searchWord();
                    }
                    
                    updateHistoryButtons();
                }
            });

            // Forward button functionality
            forwardBtn.addEventListener('click', () => {
                if (currentHistoryIndex < searchHistory.length - 1) {
                    currentHistoryIndex++;
                    const nextWord = searchHistory[currentHistoryIndex];
                    wordInput.value = nextWord;
                    currentWord = nextWord;
                    
                    // Check if we have cached data for this word
                    if (searchCache[nextWord]) {
                        displayWordData(searchCache[nextWord]);
                    } else {
                        searchWord();
                    }
                    
                    updateHistoryButtons();
                }
            });

            // Update history navigation buttons state
            function updateHistoryButtons() {
                backBtn.disabled = currentHistoryIndex <= 0;
                forwardBtn.disabled = currentHistoryIndex >= searchHistory.length - 1;
            }

            // Function to fetch a random word from IELTS or GRE words list
            function fetchRandomWord() {
                // 50% chance for IELTS word, 50% chance for GRE word
                const isIELTS = Math.random() > 0.5;
                const wordList = isIELTS ? ieltsWords : greWords;
                
                if (wordList.length === 0) {
                    showError('No words available');
                    return;
                }
                
                const randomIndex = Math.floor(Math.random() * wordList.length);
                const randomWord = wordList[randomIndex];
                
                wordInput.value = randomWord;
                currentWord = randomWord;
                searchWord();
            }

            // Function to search for a word
            async function searchWord() {
                const word = wordInput.value.trim().toLowerCase();
                
                if (word === '') {
                    showError('Please enter a word to search');
                    return;
                }
                
                // Check if we have cached data for this word
                if (searchCache[word]) {
                    displayWordData(searchCache[word]);
                    return;
                }
                
                // Add to search history
                if (searchHistory[searchHistory.length - 1] !== word) {
                    searchHistory.push(word);
                    currentHistoryIndex = searchHistory.length - 1;
                }
                
                updateHistoryButtons();
                currentWord = word;
                
                // Show loading, hide results and error
                loading.style.display = 'block';
                resultsContainer.style.display = 'none';
                errorMessage.style.display = 'none';
                
                try {
                    // Fetch from Free Dictionary API
                    const freeDictionaryResponse = await fetch(`${FREE_DICTIONARY_API}${word}`);
                    
                    let freeDictionaryData = null;
                    
                    // Process Free Dictionary response
                    if (freeDictionaryResponse.ok) {
                        freeDictionaryData = await freeDictionaryResponse.json();
                    } else {
                        throw new Error('Word not found. Please try another word.');
                    }
                    
                    // Cache the result
                    searchCache[word] = freeDictionaryData;
                    
                    // Display the data
                    displayWordData(freeDictionaryData);
                    
                    // Show results, hide loading
                    resultsContainer.style.display = 'block';
                    loading.style.display = 'none';
                    
                } catch (error) {
                    console.error('Error fetching word data:', error);
                    loading.style.display = 'none';
                    showError(error.message);
                }
            }

            // Function to fetch thesaurus data
            async function fetchThesaurusData(word) {
                if (!word) return;
                
                // Show loading for thesaurus section
                synonymsGrid.innerHTML = '<div class="loading">Loading synonyms...</div>';
                antonymsGrid.innerHTML = '<div class="loading">Loading antonyms...</div>';
                
                try {
                    const response = await fetch(`${THESAURUS_API}${word}`, {
                        headers: {
                            'X-Api-Key': THESAURUS_API_KEY
                        }
                    });
                    
                    if (response.ok) {
                        const data = await response.json();
                        thesaurusCache[word] = data;
                        displayThesaurusData(data);
                    } else {
                        throw new Error('Thesaurus data not available');
                    }
                } catch (error) {
                    console.error('Error fetching thesaurus data:', error);
                    synonymsGrid.innerHTML = '<div class="error-message">Unable to load synonyms</div>';
                    antonymsGrid.innerHTML = '<div class="error-message">Unable to load antonyms</div>';
                    
                    // Fallback to Free Dictionary synonyms/antonyms if available
                    if (searchCache[word] && searchCache[word][0] && searchCache[word][0].meanings) {
                        displayFallbackSynonymsAntonyms(searchCache[word][0].meanings);
                    }
                }
            }

            // Function to display thesaurus data
            function displayThesaurusData(data) {
                // Clear previous data
                synonymsGrid.innerHTML = '';
                antonymsGrid.innerHTML = '';
                
                // Display synonyms (max 16)
                if (data.synonyms && data.synonyms.length > 0) {
                    const limitedSynonyms = data.synonyms.slice(0, 16);
                    limitedSynonyms.forEach(synonym => {
                        const synonymItem = document.createElement('div');
                        synonymItem.className = 'synonym-grid-item';
                        synonymItem.textContent = synonym;
                        synonymItem.onclick = () => {
                            wordInput.value = synonym;
                            searchWord();
                        };
                        synonymsGrid.appendChild(synonymItem);
                    });
                } else {
                    synonymsGrid.innerHTML = '<div>No synonyms available</div>';
                }
                
                // Display antonyms (max 16)
                if (data.antonyms && data.antonyms.length > 0) {
                    const limitedAntonyms = data.antonyms.slice(0, 16);
                    limitedAntonyms.forEach(antonym => {
                        const antonymItem = document.createElement('div');
                        antonymItem.className = 'antonym-grid-item';
                        antonymItem.textContent = antonym;
                        antonymItem.onclick = () => {
                            wordInput.value = antonym;
                            searchWord();
                        };
                        antonymsGrid.appendChild(antonymItem);
                    });
                } else {
                    antonymsGrid.innerHTML = '<div>No antonyms available</div>';
                }
            }

            // Function to display fallback synonyms/antonyms from Free Dictionary
            function displayFallbackSynonymsAntonyms(meanings) {
                let synonyms = [];
                let antonyms = [];
                
                meanings.forEach(meaning => {
                    if (meaning.synonyms) {
                        synonyms = [...synonyms, ...meaning.synonyms];
                    }
                    if (meaning.antonyms) {
                        antonyms = [...antonyms, ...meaning.antonyms];
                    }
                });
                
                // Clear previous data
                synonymsGrid.innerHTML = '';
                antonymsGrid.innerHTML = '';
                
                // Display synonyms (max 16)
                if (synonyms.length > 0) {
                    const limitedSynonyms = synonyms.slice(0, 16);
                    limitedSynonyms.forEach(synonym => {
                        const synonymItem = document.createElement('div');
                        synonymItem.className = 'synonym-grid-item';
                        synonymItem.textContent = synonym;
                        synonymItem.onclick = () => {
                            wordInput.value = synonym;
                            searchWord();
                        };
                        synonymsGrid.appendChild(synonymItem);
                    });
                } else {
                    synonymsGrid.innerHTML = '<div>No synonyms available</div>';
                }
                
                // Display antonyms (max 16)
                if (antonyms.length > 0) {
                    const limitedAntonyms = antonyms.slice(0, 16);
                    limitedAntonyms.forEach(antonym => {
                        const antonymItem = document.createElement('div');
                        antonymItem.className = 'antonym-grid-item';
                        antonymItem.textContent = antonym;
                        antonymItem.onclick = () => {
                            wordInput.value = antonym;
                            searchWord();
                        };
                        antonymsGrid.appendChild(antonymItem);
                    });
                } else {
                    antonymsGrid.innerHTML = '<div>No antonyms available</div>';
                }
            }

            // Function to display word data
            function displayWordData(freeDictionaryData) {
                // Set word title
                let wordText = currentWord;
                if (freeDictionaryData && freeDictionaryData[0]) {
                    wordText = freeDictionaryData[0].word;
                }
                
                wordTitle.textContent = wordText;
                
                // Set word type (IELTS or GRE)
                const wordLower = wordText.toLowerCase();
                if (ieltsWords.map(w => w.toLowerCase()).includes(wordLower)) {
                    wordType.textContent = "IELTS";
                    wordType.className = "word-type ielts-type";
                } else if (greWords.map(w => w.toLowerCase()).includes(wordLower)) {
                    wordType.textContent = "GRE";
                    wordType.className = "word-type gre-type";
                } else {
                    wordType.textContent = "";
                }
                
                // Display Bangla translation if available
                if (banglaData[wordLower]) {
                    banglaTranslation.textContent = `Bangla: ${banglaData[wordLower]}`;
                    banglaTranslation.style.display = 'block';
                } else {
                    banglaTranslation.style.display = 'none';
                }
                
                // Get phonetic text
                let phoneticText = "No phonetic available";
                
                // Try Free Dictionary
                if (freeDictionaryData && freeDictionaryData[0] && freeDictionaryData[0].phonetics) {
                    for (let phoneticData of freeDictionaryData[0].phonetics) {
                        if (phoneticData.text) {
                            phoneticText = phoneticData.text;
                            break;
                        }
                    }
                }
                
                phonetic.textContent = phoneticText;
                
                // Get audio pronunciation
                audioUrl = null;
                
                // Try Free Dictionary
                if (freeDictionaryData && freeDictionaryData[0] && freeDictionaryData[0].phonetics) {
                    for (let phoneticData of freeDictionaryData[0].phonetics) {
                        if (phoneticData.audio && phoneticData.audio.trim() !== '') {
                            audioUrl = phoneticData.audio;
                            break;
                        }
                    }
                }
                
                // Set up audio button
                if (audioUrl) {
                    audioBtn.style.display = 'flex';
                    audioBtn.onclick = function() {
                        const audio = new Audio(audioUrl);
                        audio.play().catch(e => console.error('Audio playback failed:', e));
                    };
                } else {
                    audioBtn.style.display = 'none';
                }
                
                // Clear previous definitions
                fdDefinitionsList.innerHTML = '';
                
                // Process Free Dictionary definitions
                if (freeDictionaryData && freeDictionaryData[0]) {
                    if (freeDictionaryData[0].meanings && freeDictionaryData[0].meanings.length > 0) {
                        freeDictionaryData[0].meanings.forEach(meaning => {
                            const partOfSpeech = document.createElement('div');
                            partOfSpeech.className = 'part-of-speech';
                            partOfSpeech.textContent = meaning.partOfSpeech;
                            fdDefinitionsList.appendChild(partOfSpeech);
                            
                            if (meaning.definitions && meaning.definitions.length > 0) {
                                meaning.definitions.forEach((def, index) => {
                                    const definitionItem = document.createElement('li');
                                    definitionItem.className = 'definition-item fd-highlight';
                                    
                                    const definitionText = document.createElement('div');
                                    definitionText.className = 'definition-text';
                                    definitionText.textContent = `${index + 1}. ${def.definition}`;
                                    definitionItem.appendChild(definitionText);
                                    
                                    if (def.example) {
                                        const example = document.createElement('div');
                                        example.className = 'example';
                                        example.textContent = def.example;
                                        definitionItem.appendChild(example);
                                    }
                                    
                                    fdDefinitionsList.appendChild(definitionItem);
                                });
                            }
                        });
                    } else {
                        fdDefinitionsList.innerHTML = '<li class="definition-item">No definitions found</li>';
                    }
                } else {
                    fdDefinitionsList.innerHTML = '<li class="definition-item">No definitions available</li>';
                }
                
                // Update save button state
                updateSaveButtonState();
                
                // If we're on the synonyms tab, try to fetch thesaurus data
                if (document.querySelector('[data-tab="synonyms"]').classList.contains('active')) {
                    if (thesaurusCache[currentWord]) {
                        displayThesaurusData(thesaurusCache[currentWord]);
                    } else {
                        fetchThesaurusData(currentWord);
                    }
                }
            }

            // Function to update save button state
            function updateSaveButtonState() {
                if (savedWords.includes(currentWord)) {
                    saveBtnHeader.classList.add('saved');
                    saveBtnText.textContent = 'Word Saved';
                } else {
                    saveBtnHeader.classList.remove('saved');
                    saveBtnText.textContent = 'Save Word';
                }
            }

            // Function to save word
            function saveWord() {
                if (!currentWord) return;
                
                if (!savedWords.includes(currentWord)) {
                    savedWords.push(currentWord);
                    localStorage.setItem('savedWords', JSON.stringify(savedWords));
                    updateSaveButtonState();
                    updateSavedWordsList();
                } else {
                    // Remove word if already saved
                    savedWords = savedWords.filter(word => word !== currentWord);
                    localStorage.setItem('savedWords', JSON.stringify(savedWords));
                    updateSaveButtonState();
                    updateSavedWordsList();
                }
            }

            // Function to update saved words list
            function updateSavedWordsList() {
                savedWordsList.innerHTML = '';
                
                if (savedWords.length === 0) {
                    savedWordsList.innerHTML = '<li class="saved-word-item">No words saved yet</li>';
                    return;
                }
                
                savedWords.forEach(word => {
                    const listItem = document.createElement('li');
                    listItem.className = 'saved-word-item';
                    
                    const wordContainer = document.createElement('div');
                    
                    const wordSpan = document.createElement('span');
                    wordSpan.className = 'saved-word-text';
                    wordSpan.textContent = word;
                    wordSpan.onclick = () => {
                        wordInput.value = word;
                        searchWord();
                        // Switch to definitions tab
                        tabs.forEach(t => t.classList.remove('active'));
                        tabContents.forEach(c => c.classList.remove('active'));
                        document.querySelector('[data-tab="definitions"]').classList.add('active');
                        document.getElementById('definitions-tab').classList.add('active');
                    };
                    
                    // Add Bangla meaning if available
                    const wordLower = word.toLowerCase();
                    if (banglaData[wordLower]) {
                        const banglaSpan = document.createElement('span');
                        banglaSpan.className = 'saved-word-bangla';
                        banglaSpan.textContent = banglaData[wordLower];
                        wordContainer.appendChild(wordSpan);
                        wordContainer.appendChild(banglaSpan);
                    } else {
                        wordContainer.appendChild(wordSpan);
                    }
                    
                    const removeBtn = document.createElement('button');
                    removeBtn.className = 'remove-saved-word';
                    removeBtn.innerHTML = '<i class="fas fa-times"></i>';
                    removeBtn.onclick = (e) => {
                        e.stopPropagation();
                        savedWords = savedWords.filter(w => w !== word);
                        localStorage.setItem('savedWords', JSON.stringify(savedWords));
                        updateSavedWordsList();
                        if (word === currentWord) {
                            updateSaveButtonState();
                        }
                    };
                    
                    listItem.appendChild(wordContainer);
                    listItem.appendChild(removeBtn);
                    savedWordsList.appendChild(listItem);
                });
            }

            // Function to show error message
            function showError(message) {
                errorText.textContent = message;
                errorMessage.style.display = 'block';
            }

            // Event listeners
            searchBtn.addEventListener('click', searchWord);
            
            wordInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    searchWord();
                }
            });

            saveBtnHeader.addEventListener('click', saveWord);
        });
    </script>
</body>
</html>
